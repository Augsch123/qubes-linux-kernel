From: Samrat Kannikar <ksamrat@novell.com>
Subject: novfs: Remove dcache count restricting code
References: bnc#576026
Patch-mainline: no

Attached patch removes the code which restricts the
number of dir_cache entries, that are maintained by novfs

Signed-off-by: Samrat Kannikar <ksamrat@novell.com>
Acked-by: Jan Kara <jack@suse.cz>

---
 fs/novfs/inode.c |   15 ---------------
 1 file changed, 15 deletions(-)

--- a/fs/novfs/inode.c
+++ b/fs/novfs/inode.c
@@ -4345,8 +4345,6 @@ int novfs_add_inode_entry(struct inode *
 	struct inode_data *id;
 	struct novfs_dir_cache *new;
 	int retVal = -ENOMEM;
-	struct novfs_dir_cache *todel;
-	struct list_head *todeltmp;
 
 	//SClark
 	DbgPrint("i: %p", i);
@@ -4382,19 +4380,6 @@ int novfs_add_inode_entry(struct inode *
 			memcpy(new->name, name->name, name->len);
 			new->name[new->nameLen] = '\0';
 			list_add(&new->list, &id->DirCache);
-
-			if (id->cntDC > 20) {
-				todeltmp = id->DirCache.prev;
-				todel = list_entry(todeltmp, struct novfs_dir_cache, list);
-
-				list_del(&todel->list);
-
-				kfree(todel);
-
-				DCCount--;
-				id->cntDC--;
-			}
-
 		}
 	}
 	return (retVal);
